# Secrets

### Development
Make a folder called "secrets.json" in the Application project root.
Use the git-tracked "secrets-template.json" as a guide for the secrets.json file.

### Production
Make a docker readonly file-volume that maps next to the App.dll file in the docker container.

# Entity framework cheat sheet

### install entity framework cli tool
```bash
dotnet tool install --global dotnet-ef
```
or
```bash
dotnet tool update --global dotnet-ef
```

### create migration if there are changes to the database
```bash
dotnet ef migrations add ChampbotInitialCreate --project App
```

### update database with latest migration
```bash
dotnet ef database update --project App
```

## Audio troubleshooting

install opus and deps
```bash
sudo apt-get update && apt-get install -y \
    libopus0 \
    libopus-dev \
    && rm -rf /var/lib/apt/lists/*
```

if it still does not work:

check installation
```bash
find /usr/lib /usr/lib/x86_64-linux-gnu -name "libopus.so*"
```

if all files end in ".0" run:
```bash
sudo ln -s /usr/lib/x86_64-linux-gnu/libopus.so.0 /usr/lib/x86_64-linux-gnu/libopus.so
```
and
```bash
sudo ldconfig
```

Should work now.